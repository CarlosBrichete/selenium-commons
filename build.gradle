/*
	gradle clean test 		- Rebuild and run tests
	gradle test 			- Run tests only
	gradle cleanTest test  	- Force tests to be run even if up to date
	gradle viewResults		- Displays the report of test results (Windows only)
*/

// Support for building and testing

plugins {
    id "com.jfrog.bintray" version "1.7"
}


repositories {
  jcenter()
}

apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'maven'
apply plugin: 'maven-publish'


publishing {
	publications {
		selelinumBintrayPub(MavenPublication) {
			from components.java
			groupId 'com.liferay.gs.commons'
      artifactId 'lfrgs-selenium-commons'
      version '0.4.3'
		}
	}
}

bintray {
    user = System.getenv('BINTRAY_USER')
    key = System.getenv('BINTRAY_KEY')
    publications = ['selelinumBintrayPub']
    pkg {
        repo = 'maven'
        name = 'lfrgs-selenium-commons'
        userOrg = System.getenv('BINTRAY_USER')
        labels = ['test', 'selenium', 'liferay', 'gs']
        licenses = ['Apache-2.0']
        publicDownloadNumbers = true
        vcsUrl = 'https://github.com/gallindo/lfrgs-selenium-commons.git'
        version {
            name = '0.4.3'
            desc = 'Selenium framework for Liferay GS projects'
            released  = new Date()
            vcsTag = '0.4.3'
            //attributes = ['gradle-plugin': 'com.use.less:com.use.less.gradle:gradle-useless-plugin']
        }
    }
}

// Cf. Maven properties
ext.junitVersion = '4.12'
ext.seleniumVersion = '3.0.0'


// Cf. Maven <dependencies>
dependencies {
	compile group: 'junit', name: 'junit', version:junitVersion
	compile group: 'org.seleniumhq.selenium', name: 'selenium-firefox-driver', version:seleniumVersion
	compile group: 'org.seleniumhq.selenium', name: 'selenium-api', version:seleniumVersion
	compile group: 'org.seleniumhq.selenium', name: 'selenium-java', version:seleniumVersion
	compile group: 'org.seleniumhq.selenium', name: 'selenium-remote-driver', version:seleniumVersion
	compile group: 'org.seleniumhq.selenium', name: 'selenium-support', version:seleniumVersion
}

// A custom task to show report on tests that have run
task viewResults(dependsOn: ['test'] , type:Exec) {
		workingDir './build/reports/tests'
		commandLine 'cmd', '/c', 'start index.html'
}

// Resolve Maven dependencies as Maven does
repositories {
	mavenCentral()
	mavenLocal()
}
